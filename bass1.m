keys = [33, 29, 24, 31, 40, 36, 31, 38, 40, 36, 31, 38, 40, 36, 31, 38, 40, 36, 31, 38, 38, 41, 45, 38, 41, 45, 38, 45, 38, 41, 45, 38, 41, 45, 38, 45, 36, 40, 43, 36, 40, 43, 36, 43, 31, 35, 38, 31, 35, 38, 31, 38, 38, 41, 45, 38, 41, 45, 38, 45, 38, 41, 45, 38, 41, 45, 38, 45, 36, 40, 43, 36, 40, 43, 36, 43, 38, 43, 40, 43, 36, 40, 43, 36, 43, 36, 40, 43, 36, 40, 43, 36, 43, 40, 36, 40, 33, 36, 40, 33, 40, 33, 36, 40, 33, 36, 40, 33, 40, 36, 33, 36, 29, 33, 36, 29, 36, 29, 33, 36, 29, 33, 36, 29, 36, 29, 33, 36, 29, 33, 36, 29, 36, 31, 35, 38, 31, 35, 38, 31, 38, 36, 40, 43, 36, 40, 43, 36, 43, 36, 40, 43, 36, 40, 43, 36, 43, 40, 36, 40, 33, 36, 40, 33, 40, 33, 36, 40, 33, 36, 40, 33, 40, 36, 33, 36, 29, 33, 36, 29, 36, 29, 33, 36, 29, 33, 36, 29, 36, 29, 33, 36, 29, 33, 36, 29, 36, 31, 35, 38, 31, 35, 38, 31, 38, 36, 40, 45, 33, 40, 45, 33, 40, 29, 38, 41, 29, 38, 41, 29, 38, 24, 31, 36, 24, 31, 36, 24, 31, 31, 38, 43, 31, 38, 43, 31, 38, 36, 40, 45, 33, 40, 45, 33, 40, 31, 36, 38, 31, 36, 38, 31, 36, 24, 31, 36, 24, 31, 36, 24, 31, 31, 38, 43, 31, 38, 43, 31, 38, 33];
amps = ones(1,length(keys));
for i = 1:length(keys)
   if keys(i) == 0
      amps(i) = 0;
   end
end
freqs = [];
bpm = 120;
for i = 1:length(keys)
   freqs = [freqs 440*2^((keys(i)-49)/12)];
end
phases = zeros(1,length(keys));
fs = 8000;
tStart = [0];
durs = [240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 240, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30,  30, 30, 30, 30, 30, 30, 30, 30, 240,  30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 240]/bpm;
for i = 2:length(durs)
   tStart = [tStart, tStart(i-1)+durs(i-1)]; 
end
maxTime = max(tStart+durs) + 0.1; %-- Add time to show signal ending
durLengthEstimate = ceil(maxTime*fs);
tt = (0:durLengthEstimate)*(1/fs); %-- be conservative (add one)
b1 = 0*tt; %--make a vector of zeros to hold the total signal
for kk = 1:length(amps)
    nStart = round(fs*tStart(kk))+1; %-- add one to avoid zero index
    xNew = shortSinus(amps(kk), freqs(kk), phases(kk), fs, durs(kk));
    Lnew = length(xNew);
    nStop = nStart + Lnew-1; %<========= Add code
    b1(nStart:nStop) = b1(nStart:nStop) + xNew;
end
%plotspec(b1,fs,256); grid on